Index: app/src/main/java/com/example/water_app/user/LoginActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.water_app.user\r\n\r\nimport android.content.Intent\r\nimport android.os.Bundle\r\nimport android.util.Log\r\nimport android.widget.Toast\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport com.example.water_app.R\r\nimport com.example.water_app.databinding.ActivityLoginBinding\r\nimport com.example.water_app.main.MainActivity\r\nimport com.example.water_app.mypage.MyPageActivity\r\nimport kotlinx.android.synthetic.main.activity_join.*\r\nimport kotlinx.android.synthetic.main.activity_login.*\r\nimport org.json.JSONException\r\nimport org.json.JSONObject\r\nimport retrofit2.Call\r\nimport retrofit2.Callback\r\nimport retrofit2.Response\r\nimport retrofit2.Retrofit\r\nimport retrofit2.converter.scalars.ScalarsConverterFactory\r\n\r\nclass LoginActivity : AppCompatActivity() {\r\n\r\n    private val TAG = \"LoginActivity\"\r\n    private lateinit var binding: ActivityLoginBinding\r\n    private var preferenceHelper: PreferenceHelper? = null\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_login)\r\n\r\n        preferenceHelper = PreferenceHelper(this)\r\n\r\n        // 뷰바인딩\r\n        binding = ActivityLoginBinding.inflate(layoutInflater)\r\n        setContentView(binding.root)\r\n\r\n        binding.btnBack.setOnClickListener{\r\n            super.onBackPressed()\r\n        }\r\n\r\n        binding.btnJoin.setOnClickListener{\r\n            val intent = Intent(this, JoinActivity::class.java)\r\n            startActivity(intent)\r\n        }\r\n\r\n        binding.btnLogin.setOnClickListener{\r\n            loginUser()\r\n            \r\n            val intent = Intent(this, MainActivity::class.java)\r\n            startActivity(intent)\r\n        }\r\n    }\r\n\r\n    private fun loginUser() {\r\n        val mbr_id = binding.edtEmail!!.text.toString().trim { it <= ' ' }\r\n        val mbr_password = binding.edtPassword!!.text.toString().trim { it <= ' ' }\r\n\r\n        val retrofit = Retrofit.Builder()\r\n            .baseUrl(UserInterface.USER_URL)\r\n            .addConverterFactory(ScalarsConverterFactory.create())\r\n            .build()\r\n\r\n        val api = retrofit.create(UserInterface::class.java)\r\n        val call = api.getUserLogin(mbr_id, mbr_password)\r\n        call!!.enqueue(object : Callback<String?> {\r\n            override fun onResponse(call: Call<String?>, response: Response<String?>) {\r\n                if (response.isSuccessful && response.body() != null) {\r\n                    Log.e(\"onSuccess\", response.body()!!)\r\n                    val jsonResponse = response.body()\r\n                    parseLoginData(jsonResponse)\r\n                }\r\n            }\r\n\r\n            override fun onFailure(call: Call<String?>, t: Throwable) {\r\n                Log.e(TAG, \"에러 = \" + t.message)\r\n            }\r\n        })\r\n    }\r\n\r\n    private fun parseLoginData(response: String?) {\r\n        try {\r\n            val jsonObject = JSONObject(response)\r\n            if (jsonObject.getString(\"status\") == \"true\") {\r\n                saveInfo(response)\r\n                Toast.makeText(this, \"Login Successfully!\", Toast.LENGTH_SHORT).show()\r\n            }\r\n        } catch (e: JSONException) {\r\n            e.printStackTrace()\r\n        }\r\n    }\r\n\r\n    private fun saveInfo(response: String?) {\r\n        preferenceHelper!!.putIsLogin(true)\r\n        try {\r\n            val jsonObject = JSONObject(response)\r\n            if (jsonObject.getString(\"status\") == \"true\") {\r\n                val dataArray = jsonObject.getJSONArray(\"data\")\r\n                for (i in 0 until dataArray.length()) {\r\n                    val dataobj = dataArray.getJSONObject(i)\r\n                    preferenceHelper!!.putId(dataobj.getString(\"mbr_id\"))\r\n                    preferenceHelper!!.putPass(dataobj.getString(\"mbr_pass\"))\r\n                }\r\n            }\r\n        } catch (e: JSONException) {\r\n            e.printStackTrace()\r\n        }\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/water_app/user/LoginActivity.kt b/app/src/main/java/com/example/water_app/user/LoginActivity.kt
--- a/app/src/main/java/com/example/water_app/user/LoginActivity.kt	(revision 3f691abbc2c75b1ec2382259d896ffd792941870)
+++ b/app/src/main/java/com/example/water_app/user/LoginActivity.kt	(date 1673261382099)
@@ -5,10 +5,14 @@
 import android.util.Log
 import android.widget.Toast
 import androidx.appcompat.app.AppCompatActivity
+import androidx.lifecycle.Observer
+import androidx.lifecycle.ViewModelProvider
 import com.example.water_app.R
 import com.example.water_app.databinding.ActivityLoginBinding
 import com.example.water_app.main.MainActivity
-import com.example.water_app.mypage.MyPageActivity
+import com.example.water_app.repository.Repository
+import com.example.water_app.viewmodel.MainViewModel
+import com.example.water_app.viewmodel.MainViewModelFactory
 import kotlinx.android.synthetic.main.activity_join.*
 import kotlinx.android.synthetic.main.activity_login.*
 import org.json.JSONException
@@ -25,6 +29,8 @@
     private lateinit var binding: ActivityLoginBinding
     private var preferenceHelper: PreferenceHelper? = null
 
+    private lateinit var viewModel : MainViewModel
+
     override fun onCreate(savedInstanceState: Bundle?) {
         super.onCreate(savedInstanceState)
         setContentView(R.layout.activity_login)
@@ -35,6 +41,20 @@
         binding = ActivityLoginBinding.inflate(layoutInflater)
         setContentView(binding.root)
 
+//        // SharedPreferences 안에 값이 저장되어 있지 않을 때 -> Login
+//        if(MySharedPreferences.getUserId(this).isNullOrBlank()
+//            || MySharedPreferences.getUserPass(this).isNullOrBlank()) {
+//            loginUser()
+//        }
+//        else { // SharedPreferences 안에 값이 저장되어 있을 때 -> MainActivity로 이동
+//            Toast.makeText(this, "${MySharedPreferences.getUserId(this)}님 자동 로그인 되었습니다.", Toast.LENGTH_SHORT).show()
+//                val intent = Intent(this, MainActivity::class.java)
+//            startActivity(intent)
+//            finish()
+//        }
+
+
+
         binding.btnBack.setOnClickListener{
             super.onBackPressed()
         }
@@ -46,12 +66,15 @@
 
         binding.btnLogin.setOnClickListener{
             loginUser()
-            
+
+
+
             val intent = Intent(this, MainActivity::class.java)
             startActivity(intent)
         }
     }
 
+
     private fun loginUser() {
         val mbr_id = binding.edtEmail!!.text.toString().trim { it <= ' ' }
         val mbr_password = binding.edtPassword!!.text.toString().trim { it <= ' ' }
@@ -63,12 +86,16 @@
 
         val api = retrofit.create(UserInterface::class.java)
         val call = api.getUserLogin(mbr_id, mbr_password)
+
+
+
         call!!.enqueue(object : Callback<String?> {
             override fun onResponse(call: Call<String?>, response: Response<String?>) {
                 if (response.isSuccessful && response.body() != null) {
                     Log.e("onSuccess", response.body()!!)
                     val jsonResponse = response.body()
                     parseLoginData(jsonResponse)
+                    successLogin()
                 }
             }
 
@@ -76,6 +103,32 @@
                 Log.e(TAG, "에러 = " + t.message)
             }
         })
+
+    }
+
+    private fun successLogin(){
+//
+//        val repository = Repository()
+//        val viewModelFactory = MainViewModelFactory(repository)
+//
+////        val mbr_sn = this.intent.extras?.getString("mbr_sn")
+//
+//        viewModel = ViewModelProvider(this,viewModelFactory).get(MainViewModel::class.java)
+//        viewModel.getLogin()
+//        viewModel.loginResponse.observe(this, Observer {
+//            if(it.isSuccessful) {
+//                MySharedPreferences.setUserId(this, it.body()?.mbr_id.toString())
+//                MySharedPreferences.setUserPass(this, it.body()?.mbr_password.toString())
+//                MySharedPreferences.setUserSn(this, it.body()?.mbr_sn.toString())
+//                Log.d("test----------->1","${MySharedPreferences.getUserSn(this)}")
+//            }
+//            else{
+//                Log.d("Response",it.errorBody().toString())
+//            }
+//        })
+//
+//        MySharedPreferences.setUserId(this, binding.edtEmail!!.text.toString())
+//        MySharedPreferences.setUserPass(this, binding.edtPassword!!.text.toString())
     }
 
     private fun parseLoginData(response: String?) {
@@ -106,4 +159,5 @@
             e.printStackTrace()
         }
     }
+
 }
\ No newline at end of file
Index: app/src/main/AndroidManifest.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\">\r\n\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\r\n\r\n    <application\r\n        android:allowBackup=\"true\"\r\n        android:dataExtractionRules=\"@xml/data_extraction_rules\"\r\n        android:fullBackupContent=\"@xml/backup_rules\"\r\n        android:icon=\"@mipmap/ic_launcher\"\r\n        android:label=\"@string/app_name\"\r\n        android:roundIcon=\"@mipmap/ic_launcher_round\"\r\n        android:supportsRtl=\"true\"\r\n        android:theme=\"@style/Theme.Water_app\"\r\n        android:usesCleartextTraffic=\"true\"\r\n        tools:targetApi=\"31\">\r\n        <activity\r\n            android:name=\".mypage.NoticeContentActivity\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\".mypage.NoticeActivity\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\".mypage.PayActivity\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\".mypage.HistoryActivity\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\".mypage.PeriodActivity\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\".etc.SplashActivity\"\r\n            android:exported=\"true\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\".home.SubmitActivity\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\".Donation.DonationActivity\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\".Donation.CommunicationActivity\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\".mypage.MyPageActivity\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\".user.JoinActivity\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\".user.LoginActivity\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n        <activity\r\n            android:name=\".main.MainActivity\"\r\n            android:exported=\"false\">\r\n            <meta-data\r\n                android:name=\"android.app.lib_name\"\r\n                android:value=\"\" />\r\n        </activity>\r\n\r\n        <meta-data\r\n            android:name=\"com.kakao.sdk.AppKey\"\r\n            android:value=\"bd5be5c79f704a2ca43de0e810f10a03\" />\r\n    </application>\r\n\r\n</manifest>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/AndroidManifest.xml b/app/src/main/AndroidManifest.xml
--- a/app/src/main/AndroidManifest.xml	(revision 3f691abbc2c75b1ec2382259d896ffd792941870)
+++ b/app/src/main/AndroidManifest.xml	(date 1673261382105)
@@ -61,13 +61,6 @@
                 <category android:name="android.intent.category.LAUNCHER" />
             </intent-filter>
 
-            <meta-data
-                android:name="android.app.lib_name"
-                android:value="" />
-        </activity>
-        <activity
-            android:name=".home.SubmitActivity"
-            android:exported="false">
             <meta-data
                 android:name="android.app.lib_name"
                 android:value="" />
Index: app/src/main/java/com/example/water_app/viewmodel/MainViewModel.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.water_app.viewmodel\r\n\r\nimport androidx.lifecycle.MutableLiveData\r\nimport androidx.lifecycle.ViewModel\r\nimport androidx.lifecycle.viewModelScope\r\nimport com.example.water_app.model.NoticeData\r\nimport com.example.water_app.repository.Repository\r\nimport com.example.water_app.model.PostData\r\nimport com.example.water_app.model.UserData\r\nimport kotlinx.coroutines.launch\r\nimport retrofit2.Response\r\n\r\nclass MainViewModel(private val repository : Repository) : ViewModel() {\r\n    // 데이터 처리\r\n\r\n    val myResponse : MutableLiveData<Response<UserData>> = MutableLiveData()\r\n    val getDonationListResponse : MutableLiveData<Response<List<PostData>>> = MutableLiveData()\r\n    val noticeListResponse : MutableLiveData<Response<List<NoticeData>>> = MutableLiveData()\r\n    val getHomeEndListResponse : MutableLiveData<Response<List<PostData>>> = MutableLiveData()\r\n    val getCategory0Response : MutableLiveData<Response<List<PostData>>> = MutableLiveData()\r\n    val getCategory1Response : MutableLiveData<Response<List<PostData>>> = MutableLiveData()\r\n    val getCategory2Response : MutableLiveData<Response<List<PostData>>> = MutableLiveData()\r\n    val getCategory3Response : MutableLiveData<Response<List<PostData>>> = MutableLiveData()\r\n    val getCategory4Response : MutableLiveData<Response<List<PostData>>> = MutableLiveData()\r\n\r\n    fun getUser() {\r\n        viewModelScope.launch {\r\n            val response = repository.getUser()\r\n            myResponse.value = response\r\n        }\r\n    }\r\n    fun getDonationList() {\r\n        viewModelScope.launch {\r\n            val response = repository.getDonationList()\r\n            getDonationListResponse.value = response\r\n        }\r\n    }\r\n    fun getNoticeList() {\r\n        viewModelScope.launch {\r\n            val response = repository.getNoticeList()\r\n            noticeListResponse.value = response\r\n        }\r\n    }\r\n    fun getHomeEnd() {\r\n        viewModelScope.launch {\r\n            val response = repository.getHomeend()\r\n            getHomeEndListResponse.value = response\r\n        }\r\n    }\r\n    fun getCategory0() {\r\n        viewModelScope.launch {\r\n            val response = repository.getCategory0()\r\n            getCategory0Response.value = response\r\n        }\r\n    }\r\n    fun getCategory1() {\r\n        viewModelScope.launch {\r\n            val response = repository.getCategory1()\r\n            getCategory1Response.value = response\r\n        }\r\n    }\r\n    fun getCategory2() {\r\n        viewModelScope.launch {\r\n            val response = repository.getCategory2()\r\n            getCategory2Response.value = response\r\n        }\r\n    }\r\n    fun getCategory3() {\r\n        viewModelScope.launch {\r\n            val response = repository.getCategory3()\r\n            getCategory3Response.value = response\r\n        }\r\n    }\r\n    fun getCategory4() {\r\n        viewModelScope.launch {\r\n            val response = repository.getCategory4()\r\n            getCategory4Response.value = response\r\n        }\r\n    }\r\n\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/water_app/viewmodel/MainViewModel.kt b/app/src/main/java/com/example/water_app/viewmodel/MainViewModel.kt
--- a/app/src/main/java/com/example/water_app/viewmodel/MainViewModel.kt	(revision 3f691abbc2c75b1ec2382259d896ffd792941870)
+++ b/app/src/main/java/com/example/water_app/viewmodel/MainViewModel.kt	(date 1673261382110)
@@ -22,6 +22,7 @@
     val getCategory2Response : MutableLiveData<Response<List<PostData>>> = MutableLiveData()
     val getCategory3Response : MutableLiveData<Response<List<PostData>>> = MutableLiveData()
     val getCategory4Response : MutableLiveData<Response<List<PostData>>> = MutableLiveData()
+    val loginResponse : MutableLiveData<Response<UserData>> = MutableLiveData()
 
     fun getUser() {
         viewModelScope.launch {
@@ -77,5 +78,11 @@
             getCategory4Response.value = response
         }
     }
+    fun getLogin() {
+        viewModelScope.launch {
+            val response = repository.getLogin()
+            loginResponse.value = response
+        }
+    }
 
 }
\ No newline at end of file
Index: .idea/deploymentTargetDropDown.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<project version=\"4\">\r\n  <component name=\"deploymentTargetDropDown\">\r\n    <runningDeviceTargetSelectedWithDropDown>\r\n      <Target>\r\n        <type value=\"RUNNING_DEVICE_TARGET\" />\r\n        <deviceKey>\r\n          <Key>\r\n            <type value=\"VIRTUAL_DEVICE_PATH\" />\r\n            <value value=\"C:\\Users\\yujin\\.android\\avd\\Pixel_2_API_28.avd\" />\r\n          </Key>\r\n        </deviceKey>\r\n      </Target>\r\n    </runningDeviceTargetSelectedWithDropDown>\r\n    <targetSelectedWithDropDown>\r\n      <Target>\r\n        <type value=\"QUICK_BOOT_TARGET\" />\r\n        <deviceKey>\r\n          <Key>\r\n            <type value=\"VIRTUAL_DEVICE_PATH\" />\r\n            <value value=\"C:\\Users\\yujin\\.android\\avd\\Pixel_2_API_28.avd\" />\r\n          </Key>\r\n        </deviceKey>\r\n      </Target>\r\n    </targetSelectedWithDropDown>\r\n    <timeTargetWasSelectedWithDropDown value=\"2023-01-09T08:50:31.710032800Z\" />\r\n  </component>\r\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/deploymentTargetDropDown.xml b/.idea/deploymentTargetDropDown.xml
--- a/.idea/deploymentTargetDropDown.xml	(revision 3f691abbc2c75b1ec2382259d896ffd792941870)
+++ b/.idea/deploymentTargetDropDown.xml	(date 1673261382114)
@@ -1,17 +1,6 @@
 <?xml version="1.0" encoding="UTF-8"?>
 <project version="4">
   <component name="deploymentTargetDropDown">
-    <runningDeviceTargetSelectedWithDropDown>
-      <Target>
-        <type value="RUNNING_DEVICE_TARGET" />
-        <deviceKey>
-          <Key>
-            <type value="VIRTUAL_DEVICE_PATH" />
-            <value value="C:\Users\yujin\.android\avd\Pixel_2_API_28.avd" />
-          </Key>
-        </deviceKey>
-      </Target>
-    </runningDeviceTargetSelectedWithDropDown>
     <targetSelectedWithDropDown>
       <Target>
         <type value="QUICK_BOOT_TARGET" />
Index: app/src/main/res/layout/fragment_com_history.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<FrameLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    tools:context=\".Donation.ComHistoryFragment\">\r\n\r\n    <ScrollView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <androidx.constraintlayout.widget.ConstraintLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\">\r\n\r\n            <TextView\r\n                android:id=\"@+id/tvStart\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginStart=\"16dp\"\r\n                android:layout_marginTop=\"24dp\"\r\n                android:fontFamily=\"@font/kim_regular\"\r\n                android:text=\"시작일\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"20sp\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toTopOf=\"parent\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/tv1\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginStart=\"8dp\"\r\n                android:text=\"-\"\r\n                android:textSize=\"20sp\"\r\n                android:fontFamily=\"@font/kim_regular\"\r\n                android:textColor=\"@color/black\"\r\n                app:layout_constraintBottom_toBottomOf=\"@+id/tvStart\"\r\n                app:layout_constraintStart_toEndOf=\"@+id/tvStart\"\r\n                app:layout_constraintTop_toTopOf=\"@+id/tvStart\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/tvEnd\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginStart=\"8dp\"\r\n                android:text=\"마감일\"\r\n                android:textSize=\"20sp\"\r\n                android:fontFamily=\"@font/kim_regular\"\r\n                android:textColor=\"@color/black\"\r\n                app:layout_constraintBottom_toBottomOf=\"@+id/tvStart\"\r\n                app:layout_constraintStart_toEndOf=\"@+id/tv1\"\r\n                app:layout_constraintTop_toTopOf=\"@+id/tvStart\" />\r\n\r\n            <ProgressBar\r\n                android:id=\"@+id/progressBar\"\r\n                style=\"@style/Widget.AppCompat.ProgressBar.Horizontal\"\r\n                android:layout_width=\"200dp\"\r\n                android:layout_height=\"200dp\"\r\n                android:layout_marginTop=\"24dp\"\r\n                android:indeterminate=\"false\"\r\n                android:max=\"100\"\r\n                android:progress=\"10\"\r\n                android:progressBackgroundTint=\"@color/lightGrey\"\r\n                android:progressTint=\"@color/darkBlue\"\r\n                android:progressDrawable=\"@drawable/progressbarcircle\"\r\n                app:layout_constraintStart_toStartOf=\"@+id/tvStart\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/tvStart\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/tvPercent\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:fontFamily=\"@font/kim_bold\"\r\n                android:text=\"100\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"40sp\"\r\n                app:layout_constraintBottom_toBottomOf=\"@+id/progressBar\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toEndOf=\"@+id/progressBar\"\r\n                app:layout_constraintTop_toTopOf=\"@+id/progressBar\"\r\n                app:layout_constraintVertical_bias=\"0.533\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/tv4\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"24dp\"\r\n                android:fontFamily=\"@font/kim_regular\"\r\n                android:text=\"모금 금액\"\r\n                android:textColor=\"@color/black\"\r\n                android:textSize=\"20sp\"\r\n                app:layout_constraintStart_toStartOf=\"@+id/progressBar\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/progressBar\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/tvTotal\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginStart=\"16dp\"\r\n                android:text=\"금액\"\r\n                android:textSize=\"20sp\"\r\n                android:fontFamily=\"@font/kim_regular\"\r\n                android:textColor=\"@color/black\"\r\n                app:layout_constraintBottom_toBottomOf=\"@+id/tv4\"\r\n                app:layout_constraintStart_toEndOf=\"@+id/tv4\"\r\n                app:layout_constraintTop_toTopOf=\"@+id/tv4\" />\r\n\r\n\r\n            <TextView\r\n                android:id=\"@+id/tv5\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"8dp\"\r\n                android:text=\"지출 금액\"\r\n                android:textSize=\"20sp\"\r\n                android:fontFamily=\"@font/kim_regular\"\r\n                android:textColor=\"@color/black\"\r\n                app:layout_constraintStart_toStartOf=\"@+id/tv4\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/tv4\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/tvExpend\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginStart=\"16dp\"\r\n                android:text=\"금액\"\r\n                android:textSize=\"20sp\"\r\n                android:fontFamily=\"@font/kim_regular\"\r\n                android:textColor=\"@color/black\"\r\n                app:layout_constraintBottom_toBottomOf=\"@+id/tv5\"\r\n                app:layout_constraintStart_toEndOf=\"@+id/tv5\"\r\n                app:layout_constraintTop_toTopOf=\"@+id/tv5\" />\r\n\r\n            <TextView\r\n                android:id=\"@+id/tv3\"\r\n                android:layout_width=\"wrap_content\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginTop=\"24dp\"\r\n                android:text=\"지출 보고 내역\"\r\n                android:textSize=\"20sp\"\r\n                android:fontFamily=\"@font/kim_regular\"\r\n                android:textColor=\"@color/black\"\r\n                app:layout_constraintStart_toStartOf=\"@+id/tv5\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/tv5\" />\r\n\r\n            <androidx.recyclerview.widget.RecyclerView\r\n                android:id=\"@+id/recyclerView\"\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:layout_marginStart=\"16dp\"\r\n                android:layout_marginTop=\"8dp\"\r\n                android:layout_marginEnd=\"16dp\"\r\n                app:layout_constraintEnd_toEndOf=\"parent\"\r\n                app:layout_constraintStart_toStartOf=\"parent\"\r\n                app:layout_constraintTop_toBottomOf=\"@+id/tv3\" />\r\n\r\n\r\n        </androidx.constraintlayout.widget.ConstraintLayout>\r\n    </ScrollView>\r\n\r\n\r\n</FrameLayout>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/res/layout/fragment_com_history.xml b/app/src/main/res/layout/fragment_com_history.xml
--- a/app/src/main/res/layout/fragment_com_history.xml	(revision 3f691abbc2c75b1ec2382259d896ffd792941870)
+++ b/app/src/main/res/layout/fragment_com_history.xml	(date 1673261382120)
@@ -77,8 +77,8 @@
                 android:textColor="@color/black"
                 android:textSize="40sp"
                 app:layout_constraintBottom_toBottomOf="@+id/progressBar"
-                app:layout_constraintEnd_toEndOf="parent"
-                app:layout_constraintStart_toEndOf="@+id/progressBar"
+                app:layout_constraintEnd_toEndOf="@+id/progressBar"
+                app:layout_constraintStart_toStartOf="@+id/progressBar"
                 app:layout_constraintTop_toTopOf="@+id/progressBar"
                 app:layout_constraintVertical_bias="0.533" />
 
Index: app/src/main/java/com/example/water_app/repository/RestApi.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.water_app.repository\r\n\r\nimport com.example.water_app.model.*\r\nimport com.example.water_app.model.PostData\r\nimport com.example.water_app.model.UserData\r\nimport retrofit2.Response\r\nimport retrofit2.http.*\r\n\r\ninterface RestApi {\r\n    @GET(\"test2.php\")\r\n    suspend fun getUser(): Response<UserData>\r\n\r\n    @GET(\"home.php\")\r\n    suspend fun getDonationList(): Response<List<PostData>>\r\n\r\n    @GET(\"notice.php\")\r\n    suspend fun getNoticeList(): Response<List<NoticeData>>\r\n\r\n    @GET(\"homeend.php\")\r\n    suspend fun getHomeend(): Response<List<PostData>>\r\n\r\n    @GET(\"category0.php\")\r\n    suspend fun getCategory0(): Response<List<PostData>>\r\n\r\n    @GET(\"category1.php\")\r\n    suspend fun getCategory1(): Response<List<PostData>>\r\n\r\n    @GET(\"category2.php\")\r\n    suspend fun getCategory2(): Response<List<PostData>>\r\n\r\n    @GET(\"category3.php\")\r\n    suspend fun getCategory3(): Response<List<PostData>>\r\n\r\n    @GET(\"category4.php\")\r\n    suspend fun getCategory4(): Response<List<PostData>>\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/water_app/repository/RestApi.kt b/app/src/main/java/com/example/water_app/repository/RestApi.kt
--- a/app/src/main/java/com/example/water_app/repository/RestApi.kt	(revision 3f691abbc2c75b1ec2382259d896ffd792941870)
+++ b/app/src/main/java/com/example/water_app/repository/RestApi.kt	(date 1673261382125)
@@ -33,4 +33,7 @@
 
     @GET("category4.php")
     suspend fun getCategory4(): Response<List<PostData>>
+
+    @GET("login.php")
+    suspend fun getLogin(): Response<UserData>
 }
\ No newline at end of file
Index: app/src/main/java/com/example/water_app/main/MyPageFragment.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.water_app.main\r\n\r\nimport android.annotation.SuppressLint\r\nimport android.app.AlertDialog\r\nimport android.content.Context\r\nimport android.content.Intent\r\nimport android.net.Uri\r\nimport android.os.Bundle\r\nimport androidx.fragment.app.Fragment\r\nimport android.view.LayoutInflater\r\nimport android.view.View\r\nimport android.view.ViewGroup\r\nimport android.widget.Button\r\nimport android.widget.LinearLayout\r\nimport android.widget.Toast\r\nimport androidx.activity.OnBackPressedCallback\r\nimport com.example.water_app.R\r\nimport com.example.water_app.databinding.FragmentHomeBinding\r\nimport com.example.water_app.databinding.FragmentMyPageBinding\r\nimport com.example.water_app.mypage.HistoryActivity\r\nimport com.example.water_app.mypage.MyPageActivity\r\nimport com.example.water_app.mypage.NoticeActivity\r\nimport com.example.water_app.mypage.PeriodActivity\r\n\r\nclass MyPageFragment : Fragment() {\r\n\r\n    // 뷰바인딩\r\n    private lateinit var binding: FragmentMyPageBinding\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n    }\r\n\r\n    @SuppressLint(\"MissingInflatedId\")\r\n    override fun onCreateView(\r\n        inflater: LayoutInflater, container: ViewGroup?,\r\n        savedInstanceState: Bundle?\r\n    ): View? {\r\n\r\n        // 뷰바인딩\r\n        binding = FragmentMyPageBinding.inflate(inflater, container, false)\r\n\r\n        val view = inflater.inflate(R.layout.fragment_my_page, null)\r\n\r\n        binding.linMyPage.setOnClickListener{\r\n            activity?.let{\r\n                val intent = Intent(context, MyPageActivity::class.java)\r\n                startActivity(intent)\r\n            }\r\n        }\r\n\r\n        binding.linHistory.setOnClickListener{\r\n            activity?.let{\r\n                val intent = Intent(context, HistoryActivity::class.java)\r\n                startActivity(intent)\r\n            }\r\n        }\r\n\r\n        binding.linPeriod.setOnClickListener{\r\n            activity?.let{\r\n                val intent = Intent(context, PeriodActivity::class.java)\r\n                startActivity(intent)\r\n            }\r\n        }\r\n\r\n        binding.linNotice.setOnClickListener{\r\n            activity?.let{\r\n                val intent = Intent(context, NoticeActivity::class.java)\r\n                startActivity(intent)\r\n            }\r\n        }\r\n\r\n        // Dialog\r\n        binding.linPay.setOnClickListener{\r\n            val mDialogView = LayoutInflater.from(requireContext()).inflate(R.layout.mypage_pay, null)\r\n            val mBuilder = AlertDialog.Builder(requireContext())\r\n                .setView(mDialogView)\r\n\r\n            val  mAlertDialog = mBuilder.show()\r\n\r\n            val okButton = mDialogView.findViewById<Button>(R.id.btnCall)\r\n            okButton.setOnClickListener {\r\n\r\n                Toast.makeText(requireContext(),\"서비스 준비중\", Toast.LENGTH_LONG).show()\r\n            }\r\n\r\n            val noButton = mDialogView.findViewById<Button>(R.id.btnBackCall)\r\n            noButton.setOnClickListener {\r\n                mAlertDialog.dismiss()\r\n            }\r\n\r\n            val outButton = mDialogView.findViewById<Button>(R.id.btnOut)\r\n            outButton.setOnClickListener {\r\n\r\n                Toast.makeText(requireContext(),\"서비스 준비중\", Toast.LENGTH_LONG).show()\r\n            }\r\n        }\r\n        binding.linCall.setOnClickListener{\r\n            val mDialogView = LayoutInflater.from(requireContext()).inflate(R.layout.mypage_call, null)\r\n            val mBuilder = AlertDialog.Builder(requireContext())\r\n                .setView(mDialogView)\r\n\r\n            val  mAlertDialog = mBuilder.show()\r\n\r\n            val okButton = mDialogView.findViewById<Button>(R.id.btnCall)\r\n            okButton.setOnClickListener {\r\n\r\n                val intent = Intent(Intent.ACTION_VIEW, Uri.parse(\"tel:0531111111\"))\r\n                startActivity(intent)\r\n            }\r\n\r\n            val noButton = mDialogView.findViewById<Button>(R.id.btnBackCall)\r\n            noButton.setOnClickListener {\r\n                mAlertDialog.dismiss()\r\n            }\r\n        }\r\n        binding.linMoney.setOnClickListener{\r\n            val mDialogView = LayoutInflater.from(requireContext()).inflate(R.layout.mypage_money, null)\r\n            val mBuilder = AlertDialog.Builder(requireContext())\r\n                .setView(mDialogView)\r\n\r\n            val  mAlertDialog = mBuilder.show()\r\n\r\n            val noButton = mDialogView.findViewById<Button>(R.id.btnBackCall)\r\n            noButton.setOnClickListener {\r\n                mAlertDialog.dismiss()\r\n            }\r\n        }\r\n        return binding.root\r\n    }\r\n    //뒤로가기 메인 고정\r\n    private lateinit var callback: OnBackPressedCallback\r\n    lateinit var mainActivity: MainActivity\r\n    //뒤로가기 고정\r\n    override fun onAttach(context: Context) {\r\n        super.onAttach(context)\r\n        //뒤로가기 고정\r\n        callback = object : OnBackPressedCallback(true) {\r\n            override fun handleOnBackPressed() {\r\n            }\r\n        }\r\n        requireActivity().onBackPressedDispatcher.addCallback(this, callback)\r\n\r\n        mainActivity = context as MainActivity\r\n    }\r\n    //뒤로가기 고정\r\n    override fun onDetach() {\r\n        super.onDetach()\r\n        callback.remove()\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/water_app/main/MyPageFragment.kt b/app/src/main/java/com/example/water_app/main/MyPageFragment.kt
--- a/app/src/main/java/com/example/water_app/main/MyPageFragment.kt	(revision 3f691abbc2c75b1ec2382259d896ffd792941870)
+++ b/app/src/main/java/com/example/water_app/main/MyPageFragment.kt	(date 1673261382130)
@@ -21,6 +21,8 @@
 import com.example.water_app.mypage.MyPageActivity
 import com.example.water_app.mypage.NoticeActivity
 import com.example.water_app.mypage.PeriodActivity
+import com.example.water_app.user.LoginActivity
+import com.example.water_app.user.MySharedPreferences
 
 class MyPageFragment : Fragment() {
 
@@ -126,6 +128,11 @@
                 mAlertDialog.dismiss()
             }
         }
+        binding.linlogout.setOnClickListener{
+            MySharedPreferences.clearUser(requireContext())
+            val intent = Intent(context, LoginActivity::class.java)
+            startActivity(intent)
+        }
         return binding.root
     }
     //뒤로가기 메인 고정
Index: app/src/main/java/com/example/water_app/repository/Repository.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.water_app.repository\r\n\r\nimport com.example.water_app.model.NoticeData\r\nimport com.example.water_app.model.PostData\r\nimport com.example.water_app.model.UserData\r\nimport retrofit2.Response\r\n\r\nclass Repository {\r\n    // ViewModel에서 사용할 데이터 통신\r\n\r\n    suspend fun getUser() : Response<UserData> {\r\n        return Instance.api.getUser()\r\n    }\r\n\r\n    suspend fun getDonationList() : Response<List<PostData>> {\r\n        return Instance.api.getDonationList()\r\n    }\r\n\r\n    suspend fun getNoticeList() : Response<List<NoticeData>> {\r\n        return Instance.api.getNoticeList()\r\n    }\r\n\r\n    suspend fun getHomeend() : Response<List<PostData>> {\r\n        return Instance.api.getHomeend()\r\n    }\r\n    suspend fun getCategory0() : Response<List<PostData>> {\r\n        return Instance.api.getCategory0()\r\n    }\r\n    suspend fun getCategory1() : Response<List<PostData>> {\r\n        return Instance.api.getCategory1()\r\n    }\r\n    suspend fun getCategory2() : Response<List<PostData>> {\r\n        return Instance.api.getCategory2()\r\n    }\r\n    suspend fun getCategory3() : Response<List<PostData>> {\r\n        return Instance.api.getCategory3()\r\n    }\r\n    suspend fun getCategory4() : Response<List<PostData>> {\r\n        return Instance.api.getCategory4()\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/water_app/repository/Repository.kt b/app/src/main/java/com/example/water_app/repository/Repository.kt
--- a/app/src/main/java/com/example/water_app/repository/Repository.kt	(revision 3f691abbc2c75b1ec2382259d896ffd792941870)
+++ b/app/src/main/java/com/example/water_app/repository/Repository.kt	(date 1673261382140)
@@ -38,4 +38,7 @@
     suspend fun getCategory4() : Response<List<PostData>> {
         return Instance.api.getCategory4()
     }
+    suspend fun getLogin() : Response<UserData> {
+        return Instance.api.getLogin()
+    }
 }
\ No newline at end of file
Index: app/src/main/java/com/example/water_app/user/MySharedPreferences.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/water_app/user/MySharedPreferences.kt b/app/src/main/java/com/example/water_app/user/MySharedPreferences.kt
new file mode 100644
--- /dev/null	(date 1673261382135)
+++ b/app/src/main/java/com/example/water_app/user/MySharedPreferences.kt	(date 1673261382135)
@@ -0,0 +1,52 @@
+package com.example.water_app.user
+
+import android.content.Context
+import android.content.SharedPreferences
+
+object MySharedPreferences {
+    private val MY_ACCOUNT : String = "account"
+
+    fun setUserId(context: Context, input: String) {
+        val prefs : SharedPreferences = context.getSharedPreferences(MY_ACCOUNT, Context.MODE_PRIVATE)
+        val editor : SharedPreferences.Editor = prefs.edit()
+        editor.putString("mbr_id", input)
+        editor.commit()
+    }
+
+    fun getUserId(context: Context): String {
+        val prefs : SharedPreferences = context.getSharedPreferences(MY_ACCOUNT, Context.MODE_PRIVATE)
+        return prefs.getString("mbr_id", "").toString()
+    }
+
+    fun setUserPass(context: Context, input: String) {
+        val prefs : SharedPreferences = context.getSharedPreferences(MY_ACCOUNT, Context.MODE_PRIVATE)
+        val editor : SharedPreferences.Editor = prefs.edit()
+        editor.putString("mbr_password", input)
+        editor.commit()
+    }
+
+    fun getUserPass(context: Context): String {
+        val prefs : SharedPreferences = context.getSharedPreferences(MY_ACCOUNT, Context.MODE_PRIVATE)
+        return prefs.getString("mbr_password", "").toString()
+    }
+
+    fun setUserSn(context: Context, input: String) {
+        val prefs : SharedPreferences = context.getSharedPreferences(MY_ACCOUNT, Context.MODE_PRIVATE)
+        val editor : SharedPreferences.Editor = prefs.edit()
+        editor.putString("mbr_sn", input)
+        editor.commit()
+    }
+
+    fun getUserSn(context: Context): String {
+        val prefs : SharedPreferences = context.getSharedPreferences(MY_ACCOUNT, Context.MODE_PRIVATE)
+        return prefs.getString("mbr_sn", "").toString()
+    }
+
+    fun clearUser(context: Context) {
+        val prefs : SharedPreferences = context.getSharedPreferences(MY_ACCOUNT, Context.MODE_PRIVATE)
+        val editor : SharedPreferences.Editor = prefs.edit()
+        editor.clear()
+        editor.commit()
+    }
+
+}
\ No newline at end of file
Index: app/src/main/java/com/example/water_app/etc/SplashActivity.kt
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.water_app.etc\r\n\r\nimport android.content.Intent\r\nimport android.os.Bundle\r\nimport android.os.Handler\r\nimport androidx.appcompat.app.AppCompatActivity\r\nimport com.example.water_app.R\r\nimport com.example.water_app.main.MainActivity\r\nimport com.example.water_app.user.LoginActivity\r\n\r\nclass SplashActivity : AppCompatActivity() {\r\n\r\n    override fun onCreate(savedInstanceState: Bundle?) {\r\n        super.onCreate(savedInstanceState)\r\n        setContentView(R.layout.activity_splash)\r\n\r\n        val handler = Handler()\r\n        handler.postDelayed({\r\n            val intent = Intent(applicationContext, LoginActivity::class.java)\r\n            startActivity(intent)\r\n            finish()\r\n        }, 1500)\r\n    }\r\n\r\n    override fun onPause() {\r\n        super.onPause()\r\n        finish()\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/app/src/main/java/com/example/water_app/etc/SplashActivity.kt b/app/src/main/java/com/example/water_app/etc/SplashActivity.kt
--- a/app/src/main/java/com/example/water_app/etc/SplashActivity.kt	(revision 3f691abbc2c75b1ec2382259d896ffd792941870)
+++ b/app/src/main/java/com/example/water_app/etc/SplashActivity.kt	(date 1673261382144)
@@ -1,11 +1,12 @@
 package com.example.water_app.etc
 
+import android.content.ContentValues.TAG
 import android.content.Intent
 import android.os.Bundle
 import android.os.Handler
+import android.util.Log
 import androidx.appcompat.app.AppCompatActivity
 import com.example.water_app.R
-import com.example.water_app.main.MainActivity
 import com.example.water_app.user.LoginActivity
 
 class SplashActivity : AppCompatActivity() {
